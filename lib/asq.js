/*! asynquence
    v0.0.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/
!function(a){function d(a){return"undefined"!=typeof setImmediate?setImmediate(a):setTimeout(a,0)}function e(){function a(){function a(){clearTimeout(v),v=null,r.length=0,s.length=0,t.length=0,u.length=0}function b(){return p?e():(v||(v=d(e)),void 0)}function e(){var c,d;if(v=null,p)a();else if(o)for(;s.length;){c=s.shift();try{c.apply(c,u)}catch(e){u.push(e),e.stack&&u.push(e.stack),0===s.length&&console.error.apply(console,u)}}else if(q&&r.length>0){q=!1,c=r.shift(),d=t.slice(),t.length=0,d.unshift(f());try{c.apply(c,d)}catch(e){u.push(e),o=!0,b()}}}function f(){function a(){o||p||q||(q=!0,t.push.apply(t,arguments),u.length=0,b())}return a.fail=function(){o||p||q||(o=!0,t.length=0,u.push.apply(u,arguments),b())},a.abort=function(){o||p||(q=!1,p=!0,t.length=0,u.length=0,b())},a}function g(a,b){function e(){clearTimeout(v),v=r=s=u=null}function f(){return k?g():(v||(v=d(g)),void 0)}function g(){if(!(o||p||l)){var b,c=[];if(v=null,j)a.fail.apply(a,u),e();else if(k)a.abort(),e();else if(h()){for(l=!0,b=0;b<r.length;b++)c.push(s["m"+b]);a.apply(a,c),e()}}}function h(){if(!(o||p||j||k||l||0===r.length)){var a,b=!0;for(a=0;a<r.length;a++)if(null===r[a]){b=!1;break}return b}}function i(){function a(){if(!(o||p||j||k||l||r[b])){var a=c.call(arguments);s["m"+b]=a.length>1?a:a[0],r[b]=!0,f()}}var b=r.length;return a.fail=function(){o||p||j||k||l||r[b]||(j=!0,u=c.call(arguments),f())},a.abort=function(){o||p||j||k||l||(k=!0,g())},r[b]=null,a}var m,n,q,u,v,j=!1,k=!1,l=!1,r=[],s={};for(m=0;m<b.length&&!j&&!k;m++){n=t.slice(),n.unshift(i());try{b[m].apply(b[m],n)}catch(w){q=w,j=!0;break}}q&&a.fail(q)}function h(){return o||p?w:(arguments.length>0&&r.push.apply(r,arguments),b(),w)}function i(){return p?w:(s.push.apply(s,arguments),b(),w)}function j(){if(o||p||0===arguments.length)return w;var a=c.apply(arguments);return h(function(b){g(b,a)}),w}function k(){if(o||p||0===arguments.length)return w;var a,b=c.call(arguments);for(a=0;a<b.length;a++)!function(a){h(function(b){var d=c.call(arguments,1);a.apply(a,d),b()}).or(a.fail)}(b[a]);return w}function l(){if(o||p||0===arguments.length)return w;var a,b=c.call(arguments);for(a=0;a<b.length;a++)!function(a){h(function(b){var d=c.call(arguments,1);a.apply(a,d).pipe(b)})}(b[a]);return w}function m(){if(o||p||0===arguments.length)return w;var a,b=c.call(arguments);for(a=0;a<b.length;a++)!function(a){h(function(b){var d=c.call(arguments,1);b(a.apply(a,d))})}(b[a]);return w}function n(){return o?w:(p=!0,e(),w)}var v,o=!1,p=!1,q=!0,r=[],s=[],t=[],u=[],w={then:h,or:i,gate:j,pipe:k,seq:l,val:m,abort:n};return arguments.length>0&&w.then.apply(w,arguments),w}return a}var b=a.ASQ,c=Array.prototype.slice;a.ASQ=e(),a.ASQ.noConflict=function(){var c=a.ASQ;return a.ASQ=b,c}}(this);
